<div>
  <div class="emptyBlock" *ngIf="selcOrderId1 || selcOrderId2" (click)="selcOrderId1=null; selcOrderId2=null"></div>
  <div class="loader" *ngIf="loaderStart"></div>
  <div class="row headerSec" *ngIf="!loaderStart">
    <div class="col-6">
      <h2 class="luau-head">Orders</h2>
    </div>
    <div class="col-6">
      <form [formGroup]="searchForm" (ngSubmit)="onSubmit()">
        <div class="form-group has-search" (keydown.enter)="onSubmit()">
          <span class="fa fa-search form-control-feedback"></span>
          <input type="text" class="form-control" formControlName="order_id" [ngClass]="{ 'is-invalid': submitted && f.order_id.errors }">
          <div *ngIf="submitted && f.order_id.errors" class="invalid-feedback requireMsg">
              <div *ngIf="f.order_id.errors.required">Order Id is required.</div>
            </div>
        </div>
      </form>
    </div>
    <div class="col-12 cardSec">
      <table class="table" style="margin-top:-.5px">
        <thead>
          <tr>
            <th scope="col" style="color:#4AD2B4">Order</th>
            <th scope="col">Status</th>
            <th scope="col"></th>
            <th scope="col"></th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let order of orderList">
            <tr *ngIf="order.order_status && orderList.length>0">
              <td><label class="cusId">{{order.id}}</label>
                <p class="cusHr">{{order.timestamp}}</p>
              </td>
              <td>{{order.order_status}}</td>
              <td class="v-mid">
                <div class="p-rel productCard">
                  <span class="cusBadge1" (click)="selcOrderId1 = order.id">Product</span>
                  <div class="row ProductDetailSec" *ngIf="selcOrderId1 == order.id" >
                    <div class="col-3 p-0">
                        <img class="prodImg" [src]="order.product_details.image || imgPathP" alt="Luau Icon">
                    </div>
                    <div class="col9">
                      <div class="prodName">{{order.product_details.name | slice:0:20}}</div>
                      <div class="prodStyle">Size: {{order.product_details.size}}</div>
                      <div class="prodStyle">Color: {{order.product_details.color  | slice:0:25}}</div>
                      <div class="prodStyle"><a href="{{order.product_details.product_url}}" target="_blank">Product URL</a></div>
                    </div>
                    <div class="prodStyle">Shipping status: 
                      <span class="trackData">{{order.product_details.tracking_details.tracking_data}}</span> 
                      <a href="{{order.product_details.tracking_details.tracking_url}}" target="_blank">Tracking URL</a></div>
                  </div>
                </div>
              </td>
              <td class="v-mid">
                <div class="p-rel detailCard">
                  <span class="cusBadge2" (click)="selcOrderId2 = order.id">Order Detail</span>
                  <div class="OrderDetailSec" *ngIf="selcOrderId2 == order.id">
                    <div class="oSec">
                      <div class="orderParam1">Address</div>
                      <div class="orderParam2">{{order.order_details.shipping_address.address_line_one}}, {{order.order_details.shipping_address.zip_code}}</div>
                    </div>
                    <div class="oSec">
                      <div class="orderParam1">Payment</div>
                      <div class="orderParam2">
                        <span style="background:#000;color:#fff;padding:0px 4px;font-weight:700">VISA</span>
                        <label class="ml-1">{{(order.order_details.payment_method.number) | slice:(order.order_details.payment_method.number.length-1):15}}</label>
                      </div>
                    </div>
                    <div class="oSec">
                      <div class="orderParam1">Username: {{order.order_details.username}}</div>
                      <div class="orderParam2">{{order.order_details.user_email}}</div>
                    </div>
                    <div class="row oSec2">
                      <div class="col-9 orderAmt">Grand Total</div>
                      <div class="vol-3 orderAmt">${{order.order_details.order_grand_total || "00.00"}}</div>
                    </div>
                  </div>
                </div>
              </td>
              <td></td>
            </tr>
          </ng-container>
          <tr *ngIf="orderList.length==0" class="noOrder">
            <td colspan="5">
              <h1>No order available!</h1>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div *ngIf="orderList.length>0" class="col-12 p-0">
      <ul class="pagination justify-content-end" *ngIf="pager.pages && pager.pages.length" >
        <li class="page-item" [ngClass]="{disabled:pager.currentPage === 1}">
          <a class="page-link" (click)="setPage(pager.currentPage - 1)">Previous</a>
        </li>
        <li class="page-item" *ngFor="let page of pager.pages" [ngClass]="{active:pager.currentPage === page}">
          <a class="page-link" (click)="setPage(page)">{{page}}</a>
        </li>
        <li class="page-item" [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
          <a class="page-link" (click)="setPage(pager.currentPage + 1)">Next</a>
        </li>
      </ul>
    </div>
  </div>
  
</div>
